<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Embedded Crypto Ticker: Tasks::FactoryResetTask Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Embedded Crypto Ticker
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>Tasks</b></li><li class="navelem"><a class="el" href="classTasks_1_1FactoryResetTask.html">FactoryResetTask</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classTasks_1_1FactoryResetTask-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Tasks::FactoryResetTask Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Singleton to handle factory reset.  
 <a href="classTasks_1_1FactoryResetTask.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="factory__reset_8hpp_source.html">factory_reset.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9f2286f8de8ac412d28c500c1df73d54"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTasks_1_1FactoryResetTask.html#a9f2286f8de8ac412d28c500c1df73d54">startMonitor</a> ()</td></tr>
<tr class="memdesc:a9f2286f8de8ac412d28c500c1df73d54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the factory reset task.  <a href="classTasks_1_1FactoryResetTask.html#a9f2286f8de8ac412d28c500c1df73d54">More...</a><br /></td></tr>
<tr class="separator:a9f2286f8de8ac412d28c500c1df73d54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2ae7b20c47477bfde43536bb2827d6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTasks_1_1FactoryResetTask.html#af2ae7b20c47477bfde43536bb2827d6a">setTriggerButtonState</a> (const <a class="el" href="classHAL_1_1__Button.html#a9f7b0147395f2047799d1d05db4f707c">HAL::_Button::EventType</a> event, const uint32_t pin)</td></tr>
<tr class="memdesc:af2ae7b20c47477bfde43536bb2827d6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the required button state needed to trigger the start of the factory reset countdown.  <a href="classTasks_1_1FactoryResetTask.html#af2ae7b20c47477bfde43536bb2827d6a">More...</a><br /></td></tr>
<tr class="separator:af2ae7b20c47477bfde43536bb2827d6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea1c8b1ec851cc29055e4181301dc006"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTasks_1_1FactoryResetTask.html#aea1c8b1ec851cc29055e4181301dc006">setOneShotTimeout</a> (const uint32_t ms)</td></tr>
<tr class="memdesc:aea1c8b1ec851cc29055e4181301dc006"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the one-shot timeout at which the button state is check a second time.  <a href="classTasks_1_1FactoryResetTask.html#aea1c8b1ec851cc29055e4181301dc006">More...</a><br /></td></tr>
<tr class="separator:aea1c8b1ec851cc29055e4181301dc006"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1927d22921121bb31bacf4446e20c68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTasks_1_1FactoryResetTask.html#aa1927d22921121bb31bacf4446e20c68">setFinalButtonState</a> (const <a class="el" href="classHAL_1_1__Button.html#a9f7b0147395f2047799d1d05db4f707c">HAL::_Button::EventType</a> event)</td></tr>
<tr class="memdesc:aa1927d22921121bb31bacf4446e20c68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the final state to which to match the button.  <a href="classTasks_1_1FactoryResetTask.html#aa1927d22921121bb31bacf4446e20c68">More...</a><br /></td></tr>
<tr class="separator:aa1927d22921121bb31bacf4446e20c68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae342b0f9794c4de5775af2e402d49ba4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classHAL_1_1__Button.html#a9f7b0147395f2047799d1d05db4f707c">HAL::_Button::EventType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTasks_1_1FactoryResetTask.html#ae342b0f9794c4de5775af2e402d49ba4">getFinalButtonState</a> () const</td></tr>
<tr class="memdesc:ae342b0f9794c4de5775af2e402d49ba4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the final required button state.  <a href="classTasks_1_1FactoryResetTask.html#ae342b0f9794c4de5775af2e402d49ba4">More...</a><br /></td></tr>
<tr class="separator:ae342b0f9794c4de5775af2e402d49ba4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6de0e48611ebb0a51848757942d58de"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTasks_1_1FactoryResetTask.html#ab6de0e48611ebb0a51848757942d58de">getPin</a> () const</td></tr>
<tr class="memdesc:ab6de0e48611ebb0a51848757942d58de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the target pin used.  <a href="classTasks_1_1FactoryResetTask.html#ab6de0e48611ebb0a51848757942d58de">More...</a><br /></td></tr>
<tr class="separator:ab6de0e48611ebb0a51848757942d58de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a1fe4fd2d2781adc368ed9b83b18bd9ed"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classTasks_1_1FactoryResetTask.html">FactoryResetTask</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTasks_1_1FactoryResetTask.html#a1fe4fd2d2781adc368ed9b83b18bd9ed">instance</a> ()</td></tr>
<tr class="memdesc:a1fe4fd2d2781adc368ed9b83b18bd9ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the singleton instance for the class.  <a href="classTasks_1_1FactoryResetTask.html#a1fe4fd2d2781adc368ed9b83b18bd9ed">More...</a><br /></td></tr>
<tr class="separator:a1fe4fd2d2781adc368ed9b83b18bd9ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a639fedcd8d60ee7cb415c38cf98d4ad3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTasks_1_1FactoryResetTask.html#a639fedcd8d60ee7cb415c38cf98d4ad3">preform</a> ()</td></tr>
<tr class="memdesc:a639fedcd8d60ee7cb415c38cf98d4ad3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Conduct a factory reset.  <a href="classTasks_1_1FactoryResetTask.html#a639fedcd8d60ee7cb415c38cf98d4ad3">More...</a><br /></td></tr>
<tr class="separator:a639fedcd8d60ee7cb415c38cf98d4ad3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Singleton to handle factory reset. </p>
<p >Factory reset task check for the target button state on commencement. If in the correct state, as one shot timer checks for a pressed state after a set period of time. If a press is detected on timeout, the device preforms a factory reset. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ae342b0f9794c4de5775af2e402d49ba4" name="ae342b0f9794c4de5775af2e402d49ba4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae342b0f9794c4de5775af2e402d49ba4">&#9670;&nbsp;</a></span>getFinalButtonState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classHAL_1_1__Button.html#a9f7b0147395f2047799d1d05db4f707c">HAL::_Button::EventType</a> FactoryResetTask::getFinalButtonState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the final required button state. </p>
<dl class="section return"><dt>Returns</dt><dd>The required state. </dd></dl>

</div>
</div>
<a id="ab6de0e48611ebb0a51848757942d58de" name="ab6de0e48611ebb0a51848757942d58de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6de0e48611ebb0a51848757942d58de">&#9670;&nbsp;</a></span>getPin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t FactoryResetTask::getPin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the target pin used. </p>
<dl class="section return"><dt>Returns</dt><dd>pin. </dd></dl>

</div>
</div>
<a id="a1fe4fd2d2781adc368ed9b83b18bd9ed" name="a1fe4fd2d2781adc368ed9b83b18bd9ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fe4fd2d2781adc368ed9b83b18bd9ed">&#9670;&nbsp;</a></span>instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTasks_1_1FactoryResetTask.html">FactoryResetTask</a> * FactoryResetTask::instance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the singleton instance for the class. </p>
<dl class="section return"><dt>Returns</dt><dd>FactoryResetTask* </dd></dl>

</div>
</div>
<a id="a639fedcd8d60ee7cb415c38cf98d4ad3" name="a639fedcd8d60ee7cb415c38cf98d4ad3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a639fedcd8d60ee7cb415c38cf98d4ad3">&#9670;&nbsp;</a></span>preform()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FactoryResetTask::preform </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Conduct a factory reset. </p>
<p >The devices NVS (non-volatile storage) is erased, and the device is reset. This is automatically called if the final button state matches at the end of the timeout period. Can be used separately from startMonitor task. </p>

</div>
</div>
<a id="aa1927d22921121bb31bacf4446e20c68" name="aa1927d22921121bb31bacf4446e20c68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1927d22921121bb31bacf4446e20c68">&#9670;&nbsp;</a></span>setFinalButtonState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FactoryResetTask::setFinalButtonState </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classHAL_1_1__Button.html#a9f7b0147395f2047799d1d05db4f707c">HAL::_Button::EventType</a>&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the final state to which to match the button. </p>
<p >If the button matches this state at the expiry of the one shot timeout, a factory reset is triggered. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>The event required. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aea1c8b1ec851cc29055e4181301dc006" name="aea1c8b1ec851cc29055e4181301dc006"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea1c8b1ec851cc29055e4181301dc006">&#9670;&nbsp;</a></span>setOneShotTimeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FactoryResetTask::setOneShotTimeout </td>
          <td>(</td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the one-shot timeout at which the button state is check a second time. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ms</td><td>Timeout is milliseconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af2ae7b20c47477bfde43536bb2827d6a" name="af2ae7b20c47477bfde43536bb2827d6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2ae7b20c47477bfde43536bb2827d6a">&#9670;&nbsp;</a></span>setTriggerButtonState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FactoryResetTask::setTriggerButtonState </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classHAL_1_1__Button.html#a9f7b0147395f2047799d1d05db4f707c">HAL::_Button::EventType</a>&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>pin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the required button state needed to trigger the start of the factory reset countdown. </p>
<dl class="section warning"><dt>Warning</dt><dd>This function has no effect if used after start() </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>The event required to trigger the factory reset one-shot timer. </td></tr>
    <tr><td class="paramname">pin</td><td>The pin on which the even should occur. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9f2286f8de8ac412d28c500c1df73d54" name="a9f2286f8de8ac412d28c500c1df73d54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f2286f8de8ac412d28c500c1df73d54">&#9670;&nbsp;</a></span>startMonitor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FactoryResetTask::startMonitor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the factory reset task. </p>
<p >Check current button state and start one-shot timer if required. If the button state doesn't match the initial trigger, this call does nothing. The default requirements should be considered undefined. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>esp32/main/tasks/<a class="el" href="factory__reset_8hpp_source.html">factory_reset.hpp</a></li>
<li>esp32/main/tasks/factory_reset.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
